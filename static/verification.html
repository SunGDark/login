<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Email Verification</title>
  </head>
  <body>
    <h1>Email Verification</h1>
    <form id="verify-form">
      <label for="verification-code">Enter Verification Code:</label>
      <input type="text" autocomplete="off" id="verification-code" name="verification-code" required pattern="\d{4}" title="Enter a 4-digit code">
      <input type="submit" value="Verify">
    </form>
    <button id="resend-code">Resend Code</button>
    <script>
      const form = document.getElementById('verify-form')
      const button = document.getElementById("resend-code");
      form.addEventListener('submit', verifyUser)
        // Add an event listener for the "click" event
        button.addEventListener("click", function() {
        // This code will run when the button is clicked
        const verificationCode = document.getElementById('verification-code').value
        const result = fetch('/api/resend-code', {
          method: 'POST',
          headers: {
            //'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            verificationCode
          })
        });
      });

      async function verifyUser(event) {
        event.preventDefault()
        const verificationCode = document.getElementById('verification-code').value

        const result = await fetch('/api/resend-code', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            verificationCode
          })
        }).then((res) => res.json())
    }
    </script>
  </body>
</html>
       
